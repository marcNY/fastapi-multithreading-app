# Random Number Generator Application

## Description

This project is a full-stack application that allows users to start background jobs that generate random numbers every 5 seconds for 5 minutes. Users can:

- Start new random number generation jobs.
- View all active jobs with their latest random numbers.
- Stop jobs manually.
- View the history of random numbers generated for each job.

The application consists of:

- **Backend**: A FastAPI application running in Docker, using Redis for data storage.
- **Frontend**: A Next.js application using Tailwind CSS with DaisyUI for styling.
- **Docker Compose**: Orchestrates the frontend, backend, and Redis services.

## Table of Contents

- [Features](#features)
- [Prerequisites](#prerequisites)
- [Project Structure](#project-structure)
- [Installation and Setup](#installation-and-setup)
- [Running the Application](#running-the-application)
- [Using the Application](#using-the-application)
- [API Endpoints](#api-endpoints)
- [Technologies Used](#technologies-used)
- [Troubleshooting](#troubleshooting)
- [Contributing](#contributing)
- [License](#license)
- [Contact](#contact)
- [Additional Information](#additional-information)
- [Acknowledgments](#acknowledgments)

## Features

- **Start New Jobs**: Initiate background jobs that generate random numbers.
- **View Active Jobs**: Display all active jobs with their latest random numbers.
- **Stop Jobs**: Manually stop any active job.
- **View Job History**: Access the history of random numbers generated by each job.
- **Responsive UI**: User-friendly interface built with Next.js and styled with Tailwind CSS and DaisyUI.
- **Containerized Application**: Easy deployment using Docker and Docker Compose.

## Prerequisites

Before you begin, ensure you have the following installed:

- **Docker**: Download Docker Desktop for your operating system.
- **Docker Compose**: Comes bundled with Docker Desktop.
- **Git**: Download Git (optional, for cloning the repository).

## Project Structure

```
project-root/
├── backend/
│   ├── app/
│   │   ├── __init__.py
│   │   ├── main.py
│   │   └── random_gen.py
│   ├── Dockerfile
│   ├── pyproject.toml
│   └── README.md
├── frontend/
│   ├── components/
│   │   └── JobItem.tsx
│   ├── lib/
│   │   └── api/
│   │       └── jobs.ts
│   ├── pages/
│   │   ├── history/
│   │   │   └── [jobId].tsx
│   │   └── index.tsx
│   ├── Dockerfile
│   ├── package.json
│   ├── tailwind.config.js
│   ├── tsconfig.json
│   └── ... other Next.js files ...
├── docker-compose.yml
└── README.md
```

## Installation and Setup

1. **Clone the Repository**

   ```sh
   git clone https://your-repo-url.git
   cd project-root
   ```

2. **Build and Start the Application**

   Use Docker Compose to build and start all services:

   ```sh
   docker-compose up --build
   ```

   This command will:

   - Build Docker images for the backend, frontend, and Redis services.
   - Start the containers and set up the network.

## Running the Application

**Access the Application**

- **Frontend**: Open your browser and navigate to [http://localhost:3000](http://localhost:3000).
- **Backend API**: Accessible at [http://localhost:8000](http://localhost:8000).

## Using the Application

1. **Start a New Job**

   - Click the “Start New Job” button on the homepage.
   - A new job will appear in the list of active jobs.

2. **View Active Jobs**

   - The homepage displays all active jobs with their Job ID and Latest Number.

3. **View Job History**

   - Click the “View History” button next to a job to see all random numbers generated by that job.

4. **Stop a Job**

   - Click the “Stop Job” button to terminate a job.
   - The job will be removed from the list after the next data refresh.

## API Endpoints

The backend provides the following endpoints:

### Start a New Job

- **URL**: `POST /start`
- **Description**: Initiates a new random number generation job.
- **Response**:

  ```json
  {
    "job_id": "your-generated-job-id"
  }
  ```

### Get All Active Jobs

- **URL**: `GET /jobs`
- **Description**: Retrieves all active jobs with their latest numbers.
- **Response**:

  ```json
  {
    "jobs": [
      {
        "job_id": "job-id-1",
        "latest_number": 0.123456789
      },
      {
        "job_id": "job-id-2",
        "latest_number": 0.987654321
      }
    ]
  }
  ```

### Get Latest Number for a Job

- **URL**: `GET /status/{job_id}`
- **Description**: Retrieves the latest number generated by a specific job.
- **Response**:

  ```json
  {
    "job_id": "your-job-id",
    "latest_number": 0.123456789
  }
  ```

### Stop a Job

- **URL**: `POST /stop/{job_id}`
- **Description**: Stops a specific job.
- **Response**:

  ```json
  {
    "message": "Job {job_id} stopped."
  }
  ```

### Get Job History

- **URL**: `GET /history/{job_id}`
- **Description**: Retrieves the history of numbers generated by a job.
- **Response**:

  ```json
  {
      "job_id": "your-job-id",
      "history": [0.123456789, 0.987654321, ...]
  }
  ```

## Technologies Used

### Backend

- **FastAPI**: High-performance web framework for building APIs.
- **Python 3.9**
- **Redis**: In-memory data structure store used as a database.
- **Docker**: Containerization of the backend service.
- **Poetry**: Dependency management for Python.

### Frontend

- **Next.js**: React framework with server-side rendering.
- **React**: JavaScript library for building user interfaces.
- **TypeScript**: Typed superset of JavaScript.
- **Tailwind CSS**: Utility-first CSS framework.
- **DaisyUI**: Tailwind CSS component library.
- **Axios**: Promise-based HTTP client.

### Infrastructure

- **Docker Compose**: Tool for defining and running multi-container Docker applications.

## Troubleshooting

### Port Conflicts

- **Error**: Bind for 0.0.0.0:8000 failed: port is already allocated
- **Solution**: Change the host port mapping in `docker-compose.yml`:

  ```yaml
  services:
    backend:
      ports:
        - "8001:8000" # Change to an available port
  ```

### CORS Errors

- **Error**: CORS policy errors in the browser console.
- **Solution**: Ensure CORS is properly configured in the backend’s `main.py`:

  ```python
  from fastapi.middleware.cors import CORSMiddleware

  app.add_middleware(
      CORSMiddleware,
      allow_origins=["http://localhost:3000"],
      allow_credentials=True,
      allow_methods=["*"],
      allow_headers=["*"],
  )
  ```

### Frontend Cannot Connect to Backend

- **Solution**: Verify `NEXT_PUBLIC_API_BASE_URL` in `docker-compose.yml`:

  ```yaml
  services:
    frontend:
      environment:
        - NEXT_PUBLIC_API_BASE_URL=http://backend:8000
  ```

### Rebuilding Docker Images

- After code changes, rebuild images:

  ```sh
  docker-compose up --build
  ```

### View Logs

- **Frontend Logs**:

  ```sh
  docker logs -f frontend
  ```

- **Backend Logs**:

  ```sh
  docker logs -f backend
  ```

## Contributing

Contributions are welcome! To contribute:

1. **Fork the Repository**
2. **Create a Branch**

   ```sh
   git checkout -b feature/your-feature-name
   ```

3. **Commit Your Changes**

   ```sh
   git commit -m "Description of your changes"
   ```

4. **Push to the Branch**

   ```sh
   git push origin feature/your-feature-name
   ```

5. **Open a Pull Request**

## License

This project is licensed under the MIT License.

## Contact

- **Your Name**
- **Email**: you@example.com

## Additional Information

### Extending the Application

- **Authentication**: Implement user authentication for secured access.
- **Real-Time Updates**: Use WebSockets for real-time data instead of polling.
- **Persistent Storage**: Integrate a database for persistent data storage.

### Deployment

- **Cloud Platforms**: Deploy using AWS, Azure, Heroku, etc.
- **Scaling**: Use orchestration tools like Kubernetes for scaling.

## Acknowledgments

- **OpenAI Community**: For support and guidance.
- **Contributors**: Thanks to everyone who contributed to this project.

Enjoy using the Random Number Generator Application!
